<% content_for :title, "Order ##{@order.id} Failed" %>

Order #<%= @order.id %>
<%= @order.created_at.strftime(" #{@order.created_at.day.ordinalize} %B %Y") %>

Your order was unsuccessful.
The payment method you provided was unsuccessful in processing the order. Please try again.

<%= retry_order_url(@order) %>

Your delivery option
---------------------
<%= @order.delivery.full_name %>

Your delivery address
---------------------
<%= @order.delivery_address.full_name %>

<%= @order.delivery_address.address %>
<%= @order.delivery_address.city %>
<%= @order.delivery_address.postcode %>
<%= @order.delivery_address.country %>

<%= @order.delivery_address.telephone %>

Payment method
---------------------
<%= @order.payment_type %>

Your billing address
---------------------
<%= @order.billing_address.full_name %>

<%= @order.billing_address.address %>
<%= @order.billing_address.city %>
<%= @order.billing_address.postcode %>
<%= @order.billing_address.country %>

<%= @order.billing_address.telephone %>

Order details
---------------------
Order #<%= @order.id %>
Placed on <%= @order.updated_at.strftime("#{@order.updated_at.day.ordinalize} %b %Y") %>

<% @order.order_items.each do |item| %>
    <%= item.sku.product.name %> | <%= Store::Price.new(price: item.price, tax_type: 'net').single %> | <%= item.quantity %> | <%= Store::Price.new(price: item.total_price, tax_type: 'net').single %>
<% end %>

Delivery : <%= Store::Price.new(price: @order.delivery.price, tax_type: 'net').single %>
Subtotal: <%= Store::Price.new(price: @order.net_amount, tax_type: 'net').single %>
<%= Store.settings.tax_name %>: <%= Store::Price.new(price: @order.tax_amount, tax_type: 'net').single %>
Total: <%= Store::Price.new(price: @order.gross_amount, tax_type: 'net').single %>